name: Diagnostic Workflow for config.json

on:
  workflow_dispatch:

jobs:
  diagnose-config-file:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: 1. List all files recursively
        run: |
          echo "### Running 'ls -laR' to check file existence ###"
          ls -laR
          echo "### End of file list ###"

      - name: 2. Display content of config.json
        run: |
          echo "### Running 'cat config.json' to check its content ###"
          cat config.json
          echo "### End of config.json content ###"
        # Continue even if cat fails (e.g., file not found)
        continue-on-error: true

      - name: 3. Execute the jq command
        run: |
          echo "### Running 'jq .bots | length' to test the core command ###"
          jq '.bots | length' config.json
          echo "### End of jq command test ###"
        # Continue even if jq fails, to ensure we see the error message
        continue-on-error: true
